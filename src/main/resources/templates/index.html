<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:sec="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <title>Employee Management System</title>

    <!-- Bootstrap imported -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
          crossorigin="anonymous">
</head>

<body>
<!-- NavBar (Completed) -->
<nav class="navbar navbar-expand-md navbar-light">
    <div class="container">
        <a class="navbar-brand" href="#" th:href="@{/}">
            <img th:src="@{/logo.png}" alt="company-logo"
                 class="d-inline-block align-top" width="30" height="30"/> Employee Management System</a>

<!--        &lt;!&ndash;        DROPDOWN(Logged in as: User, dropdown to logout)&ndash;&gt;-->
<!--        <div class="btn-group">-->
<!--            <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"-->
<!--                    data-bs-auto-close="true" aria-expanded="false">-->
<!--                Logged in as: <span sec:authentication="principal.username">User</span></button>-->
<!--            <ul class="dropdown-menu">-->
<!--                <li><a class="dropdown-item" sec:authorize="isAuthenticated()" th:href="@{/logout}">Logout</a></li>-->
<!--                <li><a class="dropdown-item" href="#">Test</a></li>-->
<!--            </ul>-->
<!--        </div>-->

<!--&lt;!&ndash;        TEST&ndash;&gt;-->
<!--        <li class="nav-item dropdown">-->
<!--            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"-->
<!--               data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Test-->
<!--            </a>-->
<!--            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">-->
<!--                <a class="dropdown-item" th:href="@{/logout}">Logout</a>-->
<!--            </div>-->
<!--        </li>-->


                <a type="button" class="btn btn-danger" sec:authorize="isAuthenticated()" th:href="@{/logout}">Logout</a>
    </div>
</nav>

<!-- Page body -->
<div class="container my-2">
    <h1>Employees List</h1>

    <!-- "Welcome User", with dependency(thymeleaf-extras-springsecurity5) -->
    <div class="alert alert-success">Welcome <span sec:authentication="principal.username">User</span></div>

    <a th:href="@{/showNewEmployeeForm}" class="btn btn-primary btn-sm mb-3"> Add Employee</a>
    <table border="1" class="table tale table-striped table-responsive-md">
        <thead>
        <tr> <!-- 1st Row (First Name, Last Name, Email, Actions)-->
            <!-- Hidden hyperlinks, for toggle action, when clicking, sorting in asc/desc direction-->
            <th><a th:href="@{'/page/' + ${currentPage} + '?sortField=firstName&sortDir=' + ${reverseSortDir}}">
                Employee First Name</a></th>
            <th><a th:href="@{'/page/' + ${currentPage} + '?sortField=lastName&sortDir=' + ${reverseSortDir}}">
                Employee Last Name</a></th>
            <th><a th:href="@{'/page/' + ${currentPage} + '?sortField=email&sortDir=' + ${reverseSortDir}}">
                Employee Email</a></th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody> <!-- Each Table Row Content -->
        <tr th:each="employee : ${listEmployees}"> <!-- Iterating employees with listEmployees(Controller Class) -->
            <td th:text="${employee.firstName}"></td>
            <td th:text="${employee.lastName}"></td>
            <td th:text="${employee.email}"></td>
            <!-- Update/Delete Button  -->
            <!-- Binding employee id to thymeleaf, for employee actions -->
            <td><a th:href="@{/showFormForUpdate/{id}(id=${employee.id})}" class="btn btn-primary">Update</a>
                <a th:href="@{/deleteEmployee/{id}(id=${employee.id})}" class="btn btn-danger">Delete</a>
            </td>
        </tr>
        </tbody>
    </table>

    <!-- Pagination -->
    <nav aria-label="Page Navigation" class="display-inline">
        <ul class="pagination justify-content-center">
            <!-- Previous -->
            <li th:class="${currentPage > 1 ? 'page-item' : 'page-item disabled'}">
                <a class="page-link"
                   th:href="@{'/page/' + ${currentPage - 1} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Previous
                </a>
            </li>
            <!-- Show all pages -->
            <li th:each="i : ${#numbers.sequence(1, totalPages)}"
                th:class="${currentPage != i ? 'page-item' : 'page-item active'}">
                <a class="page-link"
                   th:href="@{'/page/' + ${i} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">[[${i}]]</a>
            </li>
            <!-- Next -->
            <li th:class="${currentPage < totalPages ? 'page-item' : 'page-item disabled'}">
                <a class="page-link"
                   th:href="@{'/page/' + ${currentPage + 1} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Next</a>
            </li>
        </ul>
    </nav>

</div>
</body>

</html>